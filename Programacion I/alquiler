package actividadT09;

import actividadT09.seguros.Seguro;
import actividadT09.vehiculos.Carga;
import actividadT09.vehiculos.Coche;
import actividadT09.vehiculos.IAlquilable;
import actividadT09.vehiculos.Vehiculo;

import java.util.Scanner;

public class GestionConcesionario {

    public static void main(String[] args) {

        Seguro[] arraySeguro = new Seguro[2];
        arraySeguro[0] = new Seguro("Seguro Basico A","Seguro Basico, que solo cubre daños a terceros",5);
        arraySeguro[1] = new Seguro("Seguro Avanzado C","Seguro Avanzado, que cubre cualquier tipo de daño",3);

        Vehiculo[] arrayFlota = new Vehiculo[4];
        arrayFlota[0] = new Carga("3321-ABC","Opel Vivaro","Camion Opel del año 2012",3,7,3500);
        arrayFlota[1] = new Carga("3300-CBD","Opel Blitz","Camion Opel del año 2016",2,4,4200);
        arrayFlota[2] = new Coche("1203-FSA","Opel Corsa","Coche del año 2016",5,6,"A");
        arrayFlota[3] = new Coche("1505-ASD", "Opel Astra","Proxima ITV en Marzo", 5,12,"B");

        IAlquilable[] arrayalquiler = {};



        muestraMenu(arrayFlota,arraySeguro,arrayalquiler);

    }

    public static void muestraMenu(Vehiculo[] arrayFlota, Seguro[] arraySeguro, IAlquilable[] arrayalquiler) {
        boolean salir = false;
        String Pregunta = "Escribe un numero del 0 al 6:";

        do {
            datosArray();
            switch (pideEntero(Pregunta)) {

                case 0:
                    System.out.println("Salir");
                    salir = true;
                    System.out.println("Gracias hasta la proxima :)");
                    break;

                case 1:

                    muestraFlota(arrayFlota);

                    break;

                case 2:
                    muestraSeguros(arraySeguro);
                    break;

                case 3:


                    reiniciarAlquiler(arrayFlota,arraySeguro,arrayalquiler);
                    break;

                case 4:
                    establecerDias(arrayalquiler);
                    break;

                case 5:
                    muestraAlquiler(arrayalquiler);
                    break;
                default:
                    System.out.println("### ERROR!!!: La opcion no es valida, por favor inserta un numero del 0 al 5");
                    break;
            }

        } while (!salir);

    }

    public static void datosArray() {

        String contenido_array[] = new String[6];
        contenido_array[0] = "0 - Salir";
        contenido_array[1] = "1 - Mostrar información de la flota";
        contenido_array[2] = "2 - Mostrar información de los seguros";
        contenido_array[3] = "3 - Reiniciar alquileres";
        contenido_array[4] = "4 - Establecer numero de dias del alquiler";
        contenido_array[5] = "5 - Mostrar alquiler";

        System.out.println("#################################");
        System.out.println("");
        System.out.println("Menu de opciones");
        System.out.println("");
        for (int i = 0; i < contenido_array.length; i++) {

            System.out.println(contenido_array[i]);

        }

        System.out.println("");
        System.out.println("#################################");


    }

    public static void muestraAlquiler (IAlquilable[]arrayalquiler){

        for (int i = 0; i < arrayalquiler.length; i++) {
            System.out.println(arrayalquiler[i]);
        }

    }

    public static void establecerDias(IAlquilable[]arrayalquiler){

        int diasEstablecidos = pideEntero("¿Cuantos dias dura el alquiler?");

        for (int i = 0; i < arrayalquiler.length ; i++) {
            arrayalquiler[i].setNumeroDias(diasEstablecidos);

        }

    }
    


    public static void reiniciarAlquiler(Vehiculo[] arrayFlota, Seguro[] arraySeguro, IAlquilable[] arrayalquiler){

        int numAlquiler = pideEntero("Cuantos vehiculos o seguros quieres alquilar?");

        arrayalquiler = new IAlquilable[numAlquiler];



        if (numAlquiler > 0 & numAlquiler < 6) {

            for (int i = 0; i < numAlquiler; i++) {

                System.out.println("Pulsa 1 para alquilar un seguro, pulsa 2 para alquilar un vehiculo ");
                System.out.println("1- Añadir un vehiculo al alquiler");
                System.out.println("2- Añadir un vehiculo un seguro");

                int opAlquiler=pideEntero("Seleccione la opcion");

                if (opAlquiler == 1) {

                    muestraFlota(arrayFlota);
                    int introCoche = pideEntero("¿Que Vehiculo quieres alquilar?");
                    arrayalquiler[i] = arrayFlota[introCoche];


                } else if (opAlquiler == 2) {

                    muestraSeguros(arraySeguro);
                    int introAlquiler = pideEntero("¿Que Seguro quieres alquilar?");
                    arrayalquiler[i] = arraySeguro[introAlquiler];
                }
            }
        }else {

            System.out.println("Solo se pueden realizar un maximo de 5 alquileres");
        };



        for (int i = 0; i < arrayalquiler.length; i++) {

            System.out.println(arrayalquiler[i]);

        }

    }


    public static void muestraFlota(Vehiculo[]arrayFlota){

        System.out.println("Los coches disponibles en la flota son:");
        for (int i = 0; i < arrayFlota.length; i++) {
            System.out.println(i + "- " + arrayFlota[i] );

        }

    }

    public static void muestraSeguros(Seguro[]arraySeguro){

        System.out.println("Los coches disponibles en la flota son:");
        for (int i = 0; i < arraySeguro.length; i++) {
            System.out.println(i + "- " + arraySeguro[i] );

        }

    }
    
    
    public static int pideEntero(String Pregunta) {

        boolean repetir = true;
        int numEntero;
        while (repetir) {
            try {

                Scanner scanner = new Scanner(System.in);
                System.out.println(Pregunta);
                numEntero = scanner.nextInt();
                repetir = false;
                return numEntero;
            } catch (Exception e) {
                System.out.println("### ERROR!!!: Valor introducido incorrecto. Por favor introduce un valor entero.");
            }

        }
        return 0;
    }

}

